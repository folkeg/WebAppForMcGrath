{% extends 'Documents/base.html' %} {% block body %}
<!-- Content Section -->
<section>
	<div class="container">
		<div class="row row-content">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a
					href=" {% url 'Documents:main' %}">Main Page</a></li>
				<li class="breadcrumb-item active">Document Create</li>
			</ol>
		</div>
		<div class="row row-content">
			<div class="col-sm-12 col-md-7">
				<h3>Create Document</h3>
				<hr>
				<form class="form-horizontal" action="" method="post"
					id="document_create_form">
					{% csrf_token %} {% for field in docform %}
					{% if field == docform.document_type or field == docform.document_date %}
                    <div class="form-group">
						<label class="control-label col-sm-4">{{field.label_tag}} *</label>
						<div class="col-sm-8">{{ field }}</div>
					</div>
                    {% else %}
					<div class="form-group">
						<label class="control-label col-sm-4">{{field.label_tag}}</label>
						<div class="col-sm-8">{{ field }}</div>
					</div>
					{% endif %}
					{% endfor %}
					{% include 'Documents/asset-selected-table-template.html' %}
					<div class="form-group hidden" style="margin-left: 40px"">
						<label class="control-label col-sm-4"> document type id:</label>
						<div class="col-sm-8">
							<input id="document_type_id" name="document_type_id">
						</div>
					</div>
					<div class="form-group hidden" style="margin-left: 40px"">
						<label class="control-label col-sm-2"> asset id:</label>
						<div class="col-sm-10">
							<input id="asset_id" name="asset_id">
						</div>
					</div>
					<br>
					<br>
					<div class="form-group" style="margin-left: 40px"">
						<button id="document_create_submit_button" type="submit" class="btn btn-success">Save</button>
					</div>
				</form>
			</div>
			{% include 'Documents/asset-link-form-template.html' %}
		</div>
	</div>
</section>

<script>
	$('#id_document_type').keyup(function() {
		postForAutoCompleteSearch('#id_document_type');
	});
	
	$('#asset_link_form').on('submit', function(event) {
		event.preventDefault();
		postForSearch('#asset_link_form', 'asset_table_in_document_parent');
	});

	$('#asset_selected_table').on('click', 'input[type="button"]',function(event) {
		$(this).closest('tr').remove();
	});
					
	$("#document_create_submit_button").click(function(event) {
		 var confirm_button = confirm("Are you sure to create the new document?");
		 if (confirm_button == true) {
			 checkAssetIdBeforeSubmit();
		 } else {
		     return false;
		 }
	}); 

</script>
{% endblock %}
